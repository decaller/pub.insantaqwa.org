<!doctype html>
<html lang="id">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Alur Metode Mendidik - Story Mode</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap");

            body {
                font-family: "Segoe UI", sans-serif;
            }

            /* Transition effects for SVG elements */
            .svg-group {
                transition:
                    opacity 0.4s ease,
                    transform 0.4s ease;
                cursor: pointer;
            }

            .dimmed {
                opacity: 0.2;
            }

            .highlighted {
                opacity: 1;
                filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.2));
            }

            /* Custom scrollbar for description area if needed */
            .desc-scroll::-webkit-scrollbar {
                width: 6px;
            }
            .desc-scroll::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            .desc-scroll::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 3px;
            }
        </style>
    </head>
    <body class="min-h-screen flex flex-col items-center justify-center">
        <!-- Main Card -->
        <div class="bg-white w-full overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="bg-slate-800 text-white p-4 text-center">
                <h1 class="text-2xl font-bold">Alur Mendidik (Story Mode)</h1>
                <p class="text-slate-300 text-sm">
                    Ikuti alur cerita di bawah untuk memahami penerapan metode.
                </p>
            </div>

            <!-- SVG Container -->
            <div class="w-full p-2 md:p-6 overflow-hidden flex justify-center">
                <svg
                    id="mainSvg"
                    viewBox="0 0 800 550"
                    class="w-full h-auto max-h-[60vh] drop-shadow-md select-none"
                >
                    <!-- Definitions for filters -->
                    <defs>
                        <filter
                            id="glow"
                            x="-20%"
                            y="-20%"
                            width="140%"
                            height="140%"
                        >
                            <feGaussianBlur stdDeviation="2" result="blur" />
                            <feFlood flood-color="white" result="color" />
                            <feComposite
                                in="color"
                                in2="blur"
                                operator="in"
                                result="shadow"
                            />
                            <feMerge>
                                <feMergeNode in="shadow" />
                                <feMergeNode in="shadow" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>

                        <filter id="text-shadow">
                            <feDropShadow
                                dx="0"
                                dy="1"
                                stdDeviation="2"
                                flood-color="black"
                                flood-opacity="0.5"
                            />
                        </filter>
                    </defs>

                    <!-- Title within SVG (Optional, kept for export consistency) -->
                    <text
                        x="400"
                        y="50"
                        text-anchor="middle"
                        font-size="32"
                        font-weight="bold"
                        fill="#333"
                    >
                        TABEL METODE MENDIDIK
                    </text>

                    <!-- === BACKGROUND COLUMNS (Grouped for Logic) === -->
                    <!-- IMAN -->
                    <g id="col-iman" class="svg-group">
                        <rect
                            x="180"
                            y="150"
                            width="206"
                            height="360"
                            fill="#a4c680"
                            stroke="none"
                        />
                        <g transform="translate(283, 300)">
                            <text
                                x="0"
                                y="-40"
                                text-anchor="middle"
                                font-size="90"
                            >
                                ‚ô•Ô∏è
                            </text>
                            <text
                                y="20"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="white"
                                filter="url(#text-shadow)"
                            >
                                Bahasa
                            </text>
                            <text
                                y="60"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="white"
                                filter="url(#text-shadow)"
                            >
                                hati
                            </text>
                        </g>
                        <!-- Header Text -->
                        <text
                            x="283"
                            y="110"
                            text-anchor="middle"
                            font-size="24"
                            font-weight="bold"
                            fill="#333"
                        >
                            IMAN
                        </text>
                        <text
                            x="283"
                            y="135"
                            text-anchor="middle"
                            font-size="16"
                            fill="#555"
                        >
                            (Kesadaran)
                        </text>
                    </g>

                    <!-- ILMU -->
                    <g id="col-ilmu" class="svg-group">
                        <rect
                            x="386"
                            y="150"
                            width="206"
                            height="360"
                            fill="#fdf289"
                            stroke="none"
                        />
                        <g transform="translate(489, 300)">
                            <text
                                x="0"
                                y="-40"
                                text-anchor="middle"
                                font-size="90"
                            >
                                üí¨
                            </text>
                            <text
                                y="20"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="black"
                                filter="url(#glow)"
                            >
                                Bahasa
                            </text>
                            <text
                                y="60"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="black"
                                filter="url(#glow)"
                            >
                                lisan
                            </text>
                        </g>
                        <!-- Header Text -->
                        <text
                            x="489"
                            y="110"
                            text-anchor="middle"
                            font-size="24"
                            font-weight="bold"
                            fill="#333"
                        >
                            ILMU
                        </text>
                        <text
                            x="489"
                            y="135"
                            text-anchor="middle"
                            font-size="16"
                            fill="#555"
                        >
                            (Pengetahuan)
                        </text>
                    </g>

                    <!-- AMAL -->
                    <g id="col-amal" class="svg-group">
                        <rect
                            x="592"
                            y="150"
                            width="208"
                            height="360"
                            fill="#c9584b"
                            stroke="none"
                        />
                        <g transform="translate(696, 300)">
                            <text
                                x="0"
                                y="-40"
                                text-anchor="middle"
                                font-size="90"
                            >
                                ü™ñ
                            </text>
                            <text
                                y="20"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="white"
                                filter="url(#text-shadow)"
                            >
                                Bahasa
                            </text>
                            <text
                                y="60"
                                text-anchor="middle"
                                font-size="36"
                                font-weight="bold"
                                fill="white"
                                filter="url(#text-shadow)"
                            >
                                tangan
                            </text>
                        </g>
                        <!-- Header Text -->
                        <text
                            x="696"
                            y="110"
                            text-anchor="middle"
                            font-size="24"
                            font-weight="bold"
                            fill="#333"
                        >
                            AMAL
                        </text>
                        <text
                            x="696"
                            y="135"
                            text-anchor="middle"
                            font-size="16"
                            fill="#555"
                        >
                            (Keterampilan)
                        </text>
                    </g>

                    <!-- Grid Lines (Always Visible) -->
                    <g stroke="black" stroke-width="2" pointer-events="none">
                        <rect
                            x="1"
                            y="80"
                            width="798"
                            height="430"
                            fill="none"
                        />
                        <line x1="0" y1="150" x2="800" y2="150" />
                        <line x1="180" y1="80" x2="180" y2="510" />
                        <line x1="386" y1="80" x2="386" y2="510" />
                        <line x1="592" y1="80" x2="592" y2="510" />
                    </g>

                    <!-- Header Labels -->
                    <g pointer-events="none">
                        <line
                            x1="0"
                            y1="80"
                            x2="180"
                            y2="150"
                            stroke="black"
                            stroke-width="1"
                        />
                        <text
                            x="170"
                            y="105"
                            text-anchor="end"
                            font-size="18"
                            font-weight="bold"
                        >
                            KONDISI
                        </text>
                        <text
                            x="10"
                            y="140"
                            text-anchor="start"
                            font-size="18"
                            font-weight="bold"
                        >
                            USIA
                        </text>
                    </g>

                    <!-- === ROWS (Left Labels) === -->
                    <!-- Removed interactive row IDs since we are focusing on story mode columns, but kept visuals -->

                    <!-- Row 1: Thufulah -->
                    <g id="row-thufulah" class="svg-group pointer-events-none">
                        <text
                            x="10"
                            y="185"
                            font-weight="bold"
                            font-size="20"
                            fill="#333"
                        >
                            Thufulah
                        </text>
                        <text x="10" y="210" font-size="16" fill="#333">
                            0 ‚Äì 7 th
                        </text>
                        <line
                            x1="0"
                            y1="240"
                            x2="800"
                            y2="240"
                            stroke="black"
                            stroke-width="2"
                        />
                    </g>

                    <!-- Row 2: Tamyiz -->
                    <g id="row-tamyiz" class="svg-group pointer-events-none">
                        <text
                            x="10"
                            y="275"
                            font-weight="bold"
                            font-size="20"
                            fill="#333"
                        >
                            Tamyiz
                        </text>
                        <text x="10" y="300" font-size="16" fill="#333">
                            7 ‚Äì 10 th
                        </text>
                        <line
                            x1="0"
                            y1="330"
                            x2="800"
                            y2="330"
                            stroke="black"
                            stroke-width="2"
                        />
                    </g>

                    <!-- Row 3: Murahaqah -->
                    <g id="row-murahaqah" class="svg-group pointer-events-none">
                        <text
                            x="10"
                            y="365"
                            font-weight="bold"
                            font-size="20"
                            fill="#333"
                        >
                            Murahaqah
                        </text>
                        <text x="10" y="390" font-size="16" fill="#333">
                            10 th ‚Äì Baligh
                        </text>
                        <line
                            x1="0"
                            y1="420"
                            x2="800"
                            y2="420"
                            stroke="black"
                            stroke-width="2"
                        />
                    </g>

                    <!-- Row 4: Baligh -->
                    <g id="row-baligh" class="svg-group pointer-events-none">
                        <!-- Background for this specific cell -->
                        <rect
                            x="0"
                            y="420"
                            width="180"
                            height="90"
                            fill="#f2eada"
                            stroke="none"
                        />
                        <text
                            x="10"
                            y="455"
                            font-weight="bold"
                            font-size="20"
                            fill="#333"
                        >
                            Setelah
                        </text>
                        <text
                            x="10"
                            y="480"
                            font-weight="bold"
                            font-size="20"
                            fill="#333"
                        >
                            baligh
                        </text>
                    </g>

                    <!-- Overlay for Row Focus (dims the rest of the table) -->
                    <path
                        id="focus-overlay"
                        d=""
                        fill="rgba(0,0,0,0.6)"
                        opacity="0"
                        pointer-events="none"
                        style="transition: opacity 0.4s ease"
                    />
                </svg>
            </div>

            <!-- Info Panel -->
            <div
                class="bg-blue-50 border-t border-blue-100 p-6 min-h-[140px] flex flex-col justify-center"
            >
                <h3
                    id="info-title"
                    class="text-xl font-bold text-blue-800 mb-2"
                >
                    Ikhtisar
                </h3>
                <p
                    id="info-desc"
                    class="text-gray-700 leading-relaxed desc-scroll max-h-[100px] overflow-y-auto"
                >
                    Mulai alur cerita untuk melihat bagaimana merespon situasi
                    pendidikan anak menggunakan 3 aspek utama.
                </p>
            </div>

            <!-- Navigation Controls -->
            <div class="bg-white p-4 border-t border-gray-200">
                <!-- Navigation Buttons -->
                <div class="flex justify-between items-center mb-6">
                    <button
                        onclick="navigate(-1)"
                        class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium transition active:scale-95"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path d="m15 18-6-6 6-6" />
                        </svg>
                        Sebelumnya
                    </button>

                    <span
                        id="step-indicator"
                        class="text-sm font-semibold text-gray-400"
                        >Start</span
                    >

                    <button
                        id="btn-next"
                        onclick="navigate(1)"
                        class="flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition shadow-lg shadow-blue-200 active:scale-95"
                    >
                        Mulai
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        >
                            <path d="m9 18 6-6-6-6" />
                        </svg>
                    </button>
                </div>

                <!-- Story Chips -->
                <div class="flex flex-wrap gap-2 justify-center">
                    <button
                        onclick="setStep(0)"
                        class="nav-chip px-3 py-1 rounded-full text-sm border hover:bg-gray-50 transition"
                    >
                        Reset
                    </button>
                    <div class="w-px h-6 bg-gray-300 mx-2 self-center"></div>
                    <button
                        onclick="setStep(1)"
                        class="nav-chip px-3 py-1 rounded-full text-sm border border-yellow-200 bg-yellow-50 text-yellow-800 hover:bg-yellow-100 transition"
                    >
                        1. Tes Ilmu
                    </button>
                    <button
                        onclick="setStep(2)"
                        class="nav-chip px-3 py-1 rounded-full text-sm border border-red-200 bg-red-50 text-red-700 hover:bg-red-100 transition"
                    >
                        2. Patuh (Tangan)
                    </button>
                    <button
                        onclick="setStep(3)"
                        class="nav-chip px-3 py-1 rounded-full text-sm border border-green-200 bg-green-50 text-green-700 hover:bg-green-100 transition"
                    >
                        3. Tidak Patuh (Hati)
                    </button>
                </div>
            </div>
        </div>

        <script>
            // Story Mode Data Steps
            const steps = [
                {
                    id: "intro",
                    title: "Ikhtisar Alur",
                    desc: "Klik 'Mulai' untuk melihat siklus pendekatan pendidikan: Tes dengan Ilmu -> Jika Patuh -> Jika Tidak Patuh.",
                    focus: [],
                    btnText: "Mulai",
                },
                {
                    id: "step1",
                    title: "1. Tes dengan ILMU",
                    desc: "Mulailah dengan memberi pengetahuan atau instruksi lisan. Ini menguji pemahaman anak menggunakan 'Bahasa Lisan'. Apakah mereka mengerti?",
                    focus: ["col-ilmu"],
                    btnText: "Selanjutnya",
                },
                {
                    id: "step2",
                    title: "2. Apabila Patuh: BAHASA TANGAN",
                    desc: "Jika anak paham dan patuh, lanjutkan ke aspek AMAL. Berikan apresiasi atau tanggung jawab nyata ('Bahasa Tangan') untuk memperkuat keterampilan mereka.",
                    focus: ["col-amal"],
                    btnText: "Selanjutnya",
                },
                {
                    id: "step3",
                    title: "3. Apabila Tidak Patuh: BAHASA HATI",
                    desc: "Jika anak menolak atau membangkang, kembali ke dasar IMAN. Gunakan 'Bahasa Hati' untuk menyentuh perasaannya dan memperbaiki kesadaran sebelum kembali mengajarkan ilmu.",
                    focus: ["col-iman"],
                    btnText: "Loop ke 1",
                },
            ];

            let currentStepIndex = 0;

            function updateUI() {
                const step = steps[currentStepIndex];

                // Update Text
                document.getElementById("info-title").innerText = step.title;
                // Color coding based on focus
                const titleClass =
                    "text-xl font-bold mb-2 transition-colors duration-300 ";
                if (step.focus.includes("col-iman"))
                    document.getElementById("info-title").className =
                        titleClass + "text-green-700";
                else if (step.focus.includes("col-ilmu"))
                    document.getElementById("info-title").className =
                        titleClass + "text-yellow-700";
                else if (step.focus.includes("col-amal"))
                    document.getElementById("info-title").className =
                        titleClass + "text-red-700";
                else
                    document.getElementById("info-title").className =
                        titleClass + "text-blue-800";

                document.getElementById("info-desc").innerText = step.desc;
                document.getElementById("step-indicator").innerText =
                    currentStepIndex === 0
                        ? "Start"
                        : `Langkah ${currentStepIndex}`;

                // Update Button Text
                const nextBtn = document.getElementById("btn-next");
                nextBtn.innerHTML = `${step.btnText} <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>`;

                // Reset SVG State
                const allGroups = document.querySelectorAll(".svg-group");
                allGroups.forEach((el) => {
                    el.classList.remove("dimmed", "highlighted");
                });

                // Apply Focus Logic
                if (step.id === "intro") {
                    // Do nothing, show all standard
                } else if (step.focus.length > 0) {
                    // Dim everything first
                    allGroups.forEach((el) => el.classList.add("dimmed"));

                    // Undim and Highlight targets
                    step.focus.forEach((id) => {
                        const target = document.getElementById(id);
                        if (target) {
                            target.classList.remove("dimmed");
                            target.classList.add("highlighted");
                        }
                    });
                }

                // Update Navigation Chips Styling
                document.querySelectorAll(".nav-chip").forEach((btn, idx) => {
                    // Map chip index to step index directly for this simpler story layout
                    if (idx === currentStepIndex) {
                        btn.classList.add(
                            "ring-2",
                            "ring-offset-1",
                            "ring-blue-400",
                            "font-bold",
                        );
                    } else {
                        btn.classList.remove(
                            "ring-2",
                            "ring-offset-1",
                            "ring-blue-400",
                            "font-bold",
                        );
                    }
                });
            }

            function navigate(direction) {
                let nextIndex = currentStepIndex + direction;

                // STORY LOGIC: Loop back to 1 (Tes Ilmu) if clicking next from 3 (Tidak Patuh)
                if (direction === 1 && currentStepIndex === 3) {
                    nextIndex = 1;
                }

                // Boundary checks
                if (nextIndex < 0) nextIndex = 0;
                // If we somehow go beyond length (shouldn't happen with logic above but safe to keep)
                if (nextIndex >= steps.length) nextIndex = 1;

                currentStepIndex = nextIndex;
                updateUI();
            }

            function setStep(index) {
                currentStepIndex = index;
                updateUI();
            }

            // Add click listeners to SVG elements
            document.getElementById("col-ilmu").onclick = () => setStep(1);
            document.getElementById("col-amal").onclick = () => setStep(2);
            document.getElementById("col-iman").onclick = () => setStep(3);

            // Initial Load
            updateUI();
        </script>
    </body>
</html>

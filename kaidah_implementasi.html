<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scatter Chart: Peta Risiko & Cakupan Pendidikan Nabawiyah</title>
    <!-- Import Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Import ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            color: #334155;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background: white;
            max-width: 1000px;
            width: 100%;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 20px;
        }

        h1 {
            color: #0f172a;
            margin: 0 0 10px 0;
            font-size: 1.5rem;
        }

        p.subtitle {
            color: #64748b;
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        #chart-container {
            width: 100%;
            height: 600px;
            margin-top: 20px;
        }

        .legend-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            font-size: 0.85rem;
            color: #64748b;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
        }
        
        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

    </style>
</head>
<body>

    <div class="">
        <header>
            <h1>Matriks Implementasi Pendidikan</h1>
            <p class="subtitle">
                Memetakan aktivitas berdasarkan cakupan (Diri vs Lembaga) dan tingkat risiko mudharat.<br>
                Label pada titik menunjukkan aktivitas kunci yang menjadi representasi kategori.
            </p>
        </header>

        <div id="chart-container"></div>

        <div class="legend-info">
            <div class="legend-item">
                <span class="dot" style="background-color: #4caf50;"></span>
                <strong>Hubb (Cinta):</strong> Pendekatan lembut & apresiasi
            </div>
            <div class="legend-item">
                <span class="dot" style="background-color: #fdd835;"></span>
                <strong>Roja' (Harap):</strong> Pendekatan visi & sistem
            </div>
            <div class="legend-item">
                <span class="dot" style="background-color: #f44336;"></span>
                <strong>Khouf (Takut):</strong> Pendekatan tegas & hukuman
            </div>
        </div>
    </div>

    <script>
        // Inisialisasi Chart
        var dom = document.getElementById('chart-container');
        var myChart = echarts.init(dom);
        var app = {};

        // DATA DEFINITION
        // Format Data: { value: [X, Y, Name, Desc], label: { ...config } }
        // X: 0-20 (Pribadi), 21-50 (Keluarga), 51-80 (Kelas), 81-100 (Lembaga)
        // Y: 0-30 (Mudah/Aman), 31-70 (Sedang), 71-100 (Sulit/Berisiko Tinggi)

        const dataHubb = [
            {
                value: [5, 5, "Senyum & Salam", "Memulai dari diri sendiri, sangat mudah"],
                label: { show: true, position: 'right', formatter: '{@2}', fontSize: 11, fontWeight: 'bold' }
            },
            [15, 10, "Mendoakan Anak", "Aktivitas hati, minim risiko"],
            [30, 20, "Memberi Hadiah Kecil", "Lingkup keluarga/kelas"],
            [45, 15, "Berkisah/Dongeng", "Pendekatan persuasif"],
            {
                value: [60, 40, "Program Apresiasi Guru", "Lingkup sekolah, butuh biaya"],
                label: { show: true, position: 'top', formatter: '{@2}', fontSize: 10 }
            },
            [85, 30, "Budaya 5S Sekolah", "Senyum, Sapa, Salam satu lembaga"],
            [20, 12, "Memeluk Anak", "Sentuhan fisik tanda sayang"],
            {
                value: [90, 50, "Gathering Yayasan", "Mempererat ukhuwah lembaga"],
                label: { show: true, position: 'left', formatter: '{@2}', fontSize: 10 }
            }
        ];

        const dataRoja = [
            {
                value: [10, 25, "Membuat Target Pribadi", "Menetapkan visi diri pendidik"],
                label: { show: true, position: 'top', formatter: '{@2}', fontSize: 10 }
            },
            [40, 45, "Rapat Keluarga", "Musyawarah menentukan aturan"],
            {
                value: [55, 60, "Menyusun Kurikulum", "Butuh keahlian, risiko jika salah arah"],
                label: { show: true, position: 'bottom', formatter: '{@2}', fontSize: 10 }
            },
            [80, 55, "Standardisasi SOP", "Sistem satu lembaga"],
            {
                value: [95, 75, "Ekspansi Cabang", "Harapan besar, risiko manajerial tinggi"],
                label: { show: true, position: 'left', formatter: '{@2}', fontSize: 11, fontWeight: 'bold' }
            },
            [25, 35, "Menabung Biaya Pendidikan", "Persiapan masa depan"],
            [70, 50, "Pelatihan Guru", "Investasi SDM"]
        ];

        const dataKhouf = [
            {
                value: [15, 85, "Hukuman Fisik (Pukul)", "Sangat berisiko mudharat & trauma"],
                label: { show: true, position: 'right', formatter: '{@2}', color: '#d32f2f', fontWeight: 'bold' }
            },
            [8, 60, "Introspeksi Dosa", "Berat dilakukan diri sendiri (Muhasabah)"],
            [50, 70, "Skorsing Siswa", "Risiko anak putus asa/benci"],
            [90, 95, "Memecat SDM", "Mudharat sosial & ekonomi besar"],
            [35, 65, "Menyita Gadget Anak", "Potensi konflik tinggi di rumah"],
            [75, 80, "Membubarkan Kelas Gaduh", "Tindakan tegas berisiko chaos"],
            {
                value: [98, 90, "Menutup Unit Usaha Rugi", "Keputusan lembaga yang pahit"],
                label: { show: true, position: 'bottom', formatter: '{@2}', fontSize: 10 }
            }
        ];

        var option = {
            backgroundColor: '#ffffff',
            title: {
                text: '',
                left: 'center'
            },
            grid: {
                left: '10%',
                right: '15%',
                bottom: '10%',
                top: '10%',
                containLabel: true
            },
            tooltip: {
                trigger: 'item',
                // Menggunakan params.value karena data sekarang campuran object & array
                formatter: function (params) {
                    return `
                        <div style="font-weight:bold; margin-bottom:5px;">${params.value[2]}</div>
                        <span style="font-size:12px; color:#666;">${params.value[3]}</span><br/>
                        <hr style="border:0; border-top:1px solid #eee; margin:5px 0;">
                        Cakupan: <strong>${params.value[0]}%</strong><br/>
                        Risiko/Kesulitan: <strong>${params.value[1]}%</strong>
                    `;
                },
                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                borderColor: '#ccc',
                borderWidth: 1,
                textStyle: {
                    color: '#333'
                }
            },
            legend: {
                data: ['Hubb (Cinta)', "Roja' (Harap)", 'Khouf (Takut)'],
                bottom: 0,
                selectedMode: 'multiple'
            },
            xAxis: {
                name: 'Cakupan\n(Scope)',
                nameLocation: 'end',
                nameTextStyle: {
                    fontWeight: 'bold',
                    fontSize: 12,
                    padding: [0, 0, 0, 20] 
                },
                type: 'value',
                min: 0,
                max: 105, // Sedikit lebih lebar agar label kanan tidak terpotong
                splitLine: {
                    show: true,
                    lineStyle: {
                        type: 'dashed'
                    }
                },
                axisLabel: {
                    formatter: function (value) {
                        if (value === 0) return 'Diri Sendiri';
                        if (value === 50) return 'Keluarga/Kelas';
                        if (value === 100) return 'Seluruh Lembaga';
                        return '';
                    }
                }
            },
            yAxis: {
                name: 'Potensi Mudharat / Kesulitan\n(Risk Level)',
                nameLocation: 'end',
                nameTextStyle: {
                    fontWeight: 'bold',
                    fontSize: 12,
                    align: 'left'
                },
                type: 'value',
                min: 0,
                max: 100,
                splitLine: {
                    show: true,
                    lineStyle: {
                        type: 'dashed'
                    }
                },
                axisLabel: {
                    formatter: function (value) {
                        if (value === 0) return 'Mudah/Aman';
                        if (value === 50) return 'Sedang';
                        if (value === 100) return 'Berisiko Tinggi';
                        return '';
                    }
                }
            },
            series: [
                {
                    name: 'Hubb (Cinta)',
                    type: 'scatter',
                    symbolSize: 20,
                    data: dataHubb,
                    itemStyle: {
                        color: '#4caf50',
                        shadowBlur: 10,
                        shadowColor: 'rgba(76, 175, 80, 0.5)'
                    },
                    markArea: {
                        silent: true,
                        itemStyle: {
                            color: 'transparent',
                            borderWidth: 1,
                            borderType: 'dashed'
                        },
                        data: [[
                            {
                                name: 'Zona Nyaman',
                                xAxis: 0,
                                yAxis: 0,
                                label: {
                                    show: true,
                                    position: 'insideBottomLeft',
                                    color: '#ccc'
                                }
                            },
                            {
                                xAxis: 50,
                                yAxis: 50
                            }
                        ]]
                    }
                },
                {
                    name: "Roja' (Harap)",
                    type: 'scatter',
                    symbolSize: 20,
                    data: dataRoja,
                    itemStyle: {
                        color: '#fdd835', 
                        borderColor: '#fbc02d',
                        borderWidth: 1,
                        shadowBlur: 10,
                        shadowColor: 'rgba(253, 216, 53, 0.5)'
                    }
                },
                {
                    name: 'Khouf (Takut)',
                    type: 'scatter',
                    symbolSize: 20,
                    data: dataKhouf,
                    itemStyle: {
                        color: '#f44336',
                        shadowBlur: 10,
                        shadowColor: 'rgba(244, 67, 54, 0.5)'
                    },
                    markLine: {
                        silent: true,
                        lineStyle: {
                            type: 'solid',
                            color: '#e57373',
                            width: 1
                        },
                        data: [
                            {
                                yAxis: 80,
                                label: {
                                    formatter: 'Zona Bahaya Tinggi',
                                    position: 'start',
                                    color: '#d32f2f'
                                }
                            }
                        ]
                    }
                }
            ]
        };

        if (option && typeof option === 'object') {
            myChart.setOption(option);
        }

        // Resize chart on window resize
        window.addEventListener('resize', myChart.resize);
    </script>
</body>
</html>